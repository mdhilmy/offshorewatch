import{j as e,L as N,C as v,a as w,b as C,P as H,c as M,p as k,d as R,e as W,i as $}from"./charts-L6FsWgqu.js";import{r as c}from"./vendor-l9rrfVDV.js";import{c as j,u as A,a as E,R as G,b as _,d as z,L as O}from"./index-CsV4c2pm.js";import{u as V}from"./useWeatherData-Ci3RhHcR.js";import{u as B}from"./useUnits-BFUXRAju.js";import{a as y,f as I}from"./dateUtils-C0Z1jtkc.js";import{C as h}from"./Card-mKvuYzky.js";import{E as Z}from"./ErrorMessage-cUXnMwDz.js";import"./cacheService-CRyDOt_3.js";import"./alert-circle-BzvAsrgg.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=j("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=j("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=j("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);v.register(w,C,H,M,k,R,W,$);const Q=({hourlyData:t,thresholds:s})=>{const n=c.useMemo(()=>t!=null&&t.length?{labels:t.map(a=>y(a.time,"MMM d HH:mm")),datasets:[{label:"Wave Height (m)",data:t.map(a=>a.waveHeight),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.3,pointRadius:0,pointHitRadius:8},{label:"Swell Height (m)",data:t.map(a=>a.swellHeight),borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.05)",fill:!0,tension:.3,pointRadius:0,pointHitRadius:8},{label:"Wind Wave (m)",data:t.map(a=>a.windWaveHeight),borderColor:"#06b6d4",borderDash:[4,4],tension:.3,pointRadius:0,pointHitRadius:8}]}:null,[t]),i=c.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:16}},tooltip:{callbacks:{label:r=>{var a;return`${r.dataset.label}: ${((a=r.parsed.y)==null?void 0:a.toFixed(1))??"N/A"} m`}}}},scales:{x:{ticks:{maxTicksLimit:12,maxRotation:45,font:{size:10}},grid:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Height (m)"},grid:{color:"rgba(0,0,0,0.06)"}}},annotation:s!=null&&s.maxWaveHeight?{annotations:{threshold:{type:"line",yMin:s.maxWaveHeight,yMax:s.maxWaveHeight,borderColor:"#ef4444",borderWidth:2,borderDash:[6,6],label:{display:!0,content:`Limit: ${s.maxWaveHeight}m`,position:"end"}}}}:void 0}),[s]);return n?e.jsx("div",{className:"h-[300px]",children:e.jsx(N,{data:n,options:i})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No wave data available"})};v.register(w,C,H,M,k,R,W,$);const X=({hourlyData:t})=>{const s=c.useMemo(()=>t!=null&&t.length?{labels:t.map(r=>y(r.time,"MMM d HH:mm")),datasets:[{label:"Wind Speed (m/s)",data:t.map(r=>r.windSpeed),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.3,pointRadius:0,pointHitRadius:8},{label:"Wind Gusts (m/s)",data:t.map(r=>r.windGusts),borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.05)",fill:!0,tension:.3,pointRadius:0,pointHitRadius:8}]}:null,[t]),n=c.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:16}},tooltip:{callbacks:{label:i=>{var r;return`${i.dataset.label}: ${((r=i.parsed.y)==null?void 0:r.toFixed(1))??"N/A"} m/s`}}}},scales:{x:{ticks:{maxTicksLimit:12,maxRotation:45,font:{size:10}},grid:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Speed (m/s)"},grid:{color:"rgba(0,0,0,0.06)"}}}}),[]);return s?e.jsx("div",{className:"h-[300px]",children:e.jsx(N,{data:s,options:n})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No wind data available"})};v.register(w,C,H,M,k,R,W);const Y=({hourlyData:t})=>{const s=c.useMemo(()=>t!=null&&t.length?{labels:t.map(r=>y(r.time,"MMM d HH:mm")),datasets:[{label:"Temperature (°C)",data:t.map(r=>r.temperature),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.4,pointRadius:0,pointHitRadius:8}]}:null,[t]),n=c.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:16}},tooltip:{callbacks:{label:i=>{var r;return`${i.dataset.label}: ${((r=i.parsed.y)==null?void 0:r.toFixed(1))??"N/A"} °C`}}}},scales:{x:{ticks:{maxTicksLimit:12,maxRotation:45,font:{size:10}},grid:{display:!1}},y:{title:{display:!0,text:"Temperature (°C)"},grid:{color:"rgba(0,0,0,0.06)"}}}}),[]);return s?e.jsx("div",{className:"h-[300px]",children:e.jsx(N,{data:s,options:n})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No temperature data available"})},u=24,D=({hourlyData:t})=>{const[s,n]=c.useState(0);if(!(t!=null&&t.length))return e.jsx("p",{className:"text-gray-500 text-sm",children:"No data available"});const i=Math.ceil(t.length/u),r=t.slice(s*u,(s+1)*u);return e.jsxs("div",{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-600",children:"Time"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:"Waves (m)"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:"Swell (m)"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:"Wind (m/s)"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:"Gusts (m/s)"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:"Temp (°C)"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:"Pressure (hPa)"})]})}),e.jsx("tbody",{children:r.map((a,o)=>{var b,f,x,g,l,m;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 text-gray-700 whitespace-nowrap",children:y(a.time,"MMM d, HH:mm")}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:e.jsx("span",{className:ee(a.waveHeight),children:((b=a.waveHeight)==null?void 0:b.toFixed(1))??"—"})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:((f=a.swellHeight)==null?void 0:f.toFixed(1))??"—"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:((x=a.windSpeed)==null?void 0:x.toFixed(1))??"—"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:((g=a.windGusts)==null?void 0:g.toFixed(1))??"—"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:((l=a.temperature)==null?void 0:l.toFixed(1))??"—"}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:((m=a.pressure)==null?void 0:m.toFixed(0))??"—"})]},o)})})]})}),i>1&&e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",s*u+1,"–",Math.min((s+1)*u,t.length)," of ",t.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n(a=>Math.max(0,a-1)),disabled:s===0,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-30",children:e.jsx(U,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[s+1," / ",i]}),e.jsx("button",{onClick:()=>n(a=>Math.min(i-1,a+1)),disabled:s>=i-1,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-30",children:e.jsx(J,{className:"w-4 h-4"})})]})]})]})},ee=t=>t==null?"text-gray-400":t<1?"text-green-600":t<2?"text-yellow-600":t<3?"text-orange-600":"text-red-600",xe=()=>{var L,P;const{state:t}=A(),{settings:s}=E(),{formatWind:n,formatWave:i,formatTemp:r,formatPressure:a}=B(),o=G[t.currentRegion],[b,f]=(o==null?void 0:o.center)||[27.5,-90.5],[x,g]=c.useState("charts"),{data:l,isLoading:m,error:S,lastFetch:F,refetch:T}=V(b,f),d=(L=l==null?void 0:l.hourly)==null?void 0:L[0];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"w-8 h-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Weather Forecast"}),e.jsxs("p",{className:"text-gray-600",children:["7-day marine and atmospheric forecast for ",o==null?void 0:o.name]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-md p-0.5",children:[e.jsxs("button",{onClick:()=>g("charts"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium transition-colors ${x==="charts"?"bg-white shadow-sm text-primary-700":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(q,{className:"w-4 h-4"}),"Charts"]}),e.jsxs("button",{onClick:()=>g("table"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium transition-colors ${x==="table"?"bg-white shadow-sm text-primary-700":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(K,{className:"w-4 h-4"}),"Table"]})]}),e.jsx("button",{onClick:T,disabled:m,className:"p-2 rounded-md hover:bg-gray-100 text-gray-600 disabled:opacity-50",title:"Refresh data",children:e.jsx(z,{className:`w-5 h-5 ${m?"animate-spin":""}`})})]})]}),d&&!m&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[e.jsx(p,{label:"Wave Height",formatted:i(d.waveHeight),color:te(d.waveHeight)}),e.jsx(p,{label:"Swell",formatted:i(d.swellHeight)}),e.jsx(p,{label:"Wind Speed",formatted:n(d.windSpeed)}),e.jsx(p,{label:"Wind Gusts",formatted:n(d.windGusts)}),e.jsx(p,{label:"Temperature",formatted:r(d.temperature)}),e.jsx(p,{label:"Pressure",formatted:a(d.pressure)})]}),m?e.jsx(O,{message:"Loading forecast data..."}):S?e.jsx(Z,{error:S,onRetry:T}):l?e.jsxs(e.Fragment,{children:[x==="charts"?e.jsxs("div",{className:"space-y-6",children:[e.jsx(h,{title:"Wave Height Forecast",subtitle:"Significant wave height, swell, and wind waves",children:e.jsx(Q,{hourlyData:l.hourly,thresholds:(P=s.thresholds)==null?void 0:P.helicopterOps})}),e.jsx(h,{title:"Wind Speed Forecast",subtitle:"Sustained wind speed and gusts",children:e.jsx(X,{hourlyData:l.hourly})}),e.jsx(h,{title:"Temperature Forecast",subtitle:"Air temperature at 2m",children:e.jsx(Y,{hourlyData:l.hourly})})]}):e.jsx(h,{title:"Hourly Forecast Data",subtitle:`${l.hourly.length} hours of forecast data`,children:e.jsx(D,{hourlyData:l.hourly})}),e.jsxs("p",{className:"text-xs text-gray-400 text-right",children:["Source: Open-Meteo | Last updated: ",F?I(F):"N/A"]})]}):e.jsx(h,{children:e.jsx("p",{className:"text-gray-500",children:"No forecast data available for this region."})})]})},p=({label:t,formatted:s,color:n="text-gray-900"})=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t}),e.jsx("p",{className:`text-lg font-semibold ${n}`,children:s})]}),te=t=>t==null?"text-gray-900":t<1?"text-green-600":t<2?"text-yellow-600":t<3?"text-orange-600":"text-red-600";export{xe as default};
