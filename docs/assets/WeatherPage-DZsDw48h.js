import{j as e,L as H,C as M,a as k,b as R,P as W,c as S,p as T,d as L,e as P,i as G}from"./charts-L6FsWgqu.js";import{r as g}from"./vendor-l9rrfVDV.js";import{c as N,u as U,a as _,R as z,b as O,d as V,L as B}from"./index-eAN7I8HX.js";import{u as I}from"./useWeatherData-B2k0rqJg.js";import{u as Z}from"./useUnits-5qtlhRyL.js";import{a as v,f as q}from"./dateUtils-C0Z1jtkc.js";import{C as f}from"./Card-mKvuYzky.js";import{E as J}from"./ErrorMessage-DGsvJo_K.js";import"./cacheService-Di-KdHW3.js";import"./alert-circle-CraVoUg3.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=N("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=N("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=N("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=N("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);M.register(k,R,W,S,T,L,P,G);const D=({hourlyData:t,thresholds:a})=>{const l=g.useMemo(()=>t!=null&&t.length?{labels:t.map(n=>v(n.time,"MMM d HH:mm")),datasets:[{label:"Wave Height (m)",data:t.map(n=>n.waveHeight),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.3,pointRadius:0,pointHitRadius:8},{label:"Swell Height (m)",data:t.map(n=>n.swellHeight),borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.05)",fill:!0,tension:.3,pointRadius:0,pointHitRadius:8},{label:"Wind Wave (m)",data:t.map(n=>n.windWaveHeight),borderColor:"#06b6d4",borderDash:[4,4],tension:.3,pointRadius:0,pointHitRadius:8}]}:null,[t]),o=g.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:16}},tooltip:{callbacks:{label:s=>{var n;return`${s.dataset.label}: ${((n=s.parsed.y)==null?void 0:n.toFixed(1))??"N/A"} m`}}}},scales:{x:{ticks:{maxTicksLimit:12,maxRotation:45,font:{size:10}},grid:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Height (m)"},grid:{color:"rgba(0,0,0,0.06)"}}},annotation:a!=null&&a.maxWaveHeight?{annotations:{threshold:{type:"line",yMin:a.maxWaveHeight,yMax:a.maxWaveHeight,borderColor:"#ef4444",borderWidth:2,borderDash:[6,6],label:{display:!0,content:`Limit: ${a.maxWaveHeight}m`,position:"end"}}}}:void 0}),[a]);return l?e.jsx("div",{className:"h-[300px]",children:e.jsx(H,{data:l,options:o})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No wave data available"})};M.register(k,R,W,S,T,L,P,G);const ee=({hourlyData:t})=>{const a=g.useMemo(()=>t!=null&&t.length?{labels:t.map(s=>v(s.time,"MMM d HH:mm")),datasets:[{label:"Wind Speed (m/s)",data:t.map(s=>s.windSpeed),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.3,pointRadius:0,pointHitRadius:8},{label:"Wind Gusts (m/s)",data:t.map(s=>s.windGusts),borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.05)",fill:!0,tension:.3,pointRadius:0,pointHitRadius:8}]}:null,[t]),l=g.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:16}},tooltip:{callbacks:{label:o=>{var s;return`${o.dataset.label}: ${((s=o.parsed.y)==null?void 0:s.toFixed(1))??"N/A"} m/s`}}}},scales:{x:{ticks:{maxTicksLimit:12,maxRotation:45,font:{size:10}},grid:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Speed (m/s)"},grid:{color:"rgba(0,0,0,0.06)"}}}}),[]);return a?e.jsx("div",{className:"h-[300px]",children:e.jsx(H,{data:a,options:l})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No wind data available"})};M.register(k,R,W,S,T,L,P);const te=({hourlyData:t})=>{const a=g.useMemo(()=>t!=null&&t.length?{labels:t.map(s=>v(s.time,"MMM d HH:mm")),datasets:[{label:"Temperature (°C)",data:t.map(s=>s.temperature),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.4,pointRadius:0,pointHitRadius:8}]}:null,[t]),l=g.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:16}},tooltip:{callbacks:{label:o=>{var s;return`${o.dataset.label}: ${((s=o.parsed.y)==null?void 0:s.toFixed(1))??"N/A"} °C`}}}},scales:{x:{ticks:{maxTicksLimit:12,maxRotation:45,font:{size:10}},grid:{display:!1}},y:{title:{display:!0,text:"Temperature (°C)"},grid:{color:"rgba(0,0,0,0.06)"}}}}),[]);return a?e.jsx("div",{className:"h-[300px]",children:e.jsx(H,{data:a,options:l})}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No temperature data available"})},j=24,se=({hourlyData:t,formatWave:a,formatWind:l,formatTemp:o,formatPressure:s,waveUnit:n="m",windUnit:y="km/h",tempUnit:w="°C"})=>{const[c,m]=g.useState(0);if(!(t!=null&&t.length))return e.jsx("p",{className:"text-gray-500 text-sm",children:"No data available"});const h=Math.ceil(t.length/j),C=t.slice(c*j,(c+1)*j),x=(i,r)=>{var b;if(!i||r==null)return((b=r==null?void 0:r.toFixed)==null?void 0:b.call(r,1))??"—";const d=i(r);return d==="N/A"?"—":d.split(" ")[0]};return e.jsxs("div",{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-600",children:"Time"}),e.jsxs("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:["Waves (",n,")"]}),e.jsxs("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:["Swell (",n,")"]}),e.jsxs("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:["Wind (",y,")"]}),e.jsxs("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:["Gusts (",y,")"]}),e.jsxs("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:["Temp (",w,")"]}),e.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-600",children:"Pressure (hPa)"})]})}),e.jsx("tbody",{children:C.map((i,r)=>{var d;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-3 text-gray-700 whitespace-nowrap",children:v(i.time,"MMM d, HH:mm")}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:e.jsx("span",{className:ae(i.waveHeight),children:x(a,i.waveHeight)})}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:x(a,i.swellHeight)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:x(l,i.windSpeed)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:x(l,i.windGusts)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:x(o,i.temperature)}),e.jsx("td",{className:"py-2 px-3 text-right font-mono",children:((d=i.pressure)==null?void 0:d.toFixed(0))??"—"})]},r)})})]})}),h>1&&e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",c*j+1,"–",Math.min((c+1)*j,t.length)," of ",t.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m(i=>Math.max(0,i-1)),disabled:c===0,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-30",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[c+1," / ",h]}),e.jsx("button",{onClick:()=>m(i=>Math.min(h-1,i+1)),disabled:c>=h-1,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-30",children:e.jsx(X,{className:"w-4 h-4"})})]})]})]})},ae=t=>t==null?"text-gray-400":t<1?"text-green-600":t<2?"text-yellow-600":t<3?"text-orange-600":"text-red-600",he=()=>{var $,E;const{state:t}=U(),{settings:a}=_(),{formatWind:l,formatWave:o,formatTemp:s,formatPressure:n,getWaveUnit:y,getWindUnit:w,getTempUnit:c}=Z(),m=z[t.currentRegion],[h,C]=(m==null?void 0:m.center)||[27.5,-90.5],[x,i]=g.useState("charts"),{data:r,isLoading:d,error:b,lastFetch:A,refetch:F}=I(h,C),p=($=r==null?void 0:r.hourly)==null?void 0:$[0];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"w-8 h-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Weather Forecast"}),e.jsxs("p",{className:"text-gray-600",children:["7-day marine and atmospheric forecast for ",m==null?void 0:m.name]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-md p-0.5",children:[e.jsxs("button",{onClick:()=>i("charts"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium transition-colors ${x==="charts"?"bg-white shadow-sm text-primary-700":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(K,{className:"w-4 h-4"}),"Charts"]}),e.jsxs("button",{onClick:()=>i("table"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium transition-colors ${x==="table"?"bg-white shadow-sm text-primary-700":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Y,{className:"w-4 h-4"}),"Table"]})]}),e.jsx("button",{onClick:F,disabled:d,className:"p-2 rounded-md hover:bg-gray-100 text-gray-600 disabled:opacity-50",title:"Refresh data",children:e.jsx(V,{className:`w-5 h-5 ${d?"animate-spin":""}`})})]})]}),p&&!d&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[e.jsx(u,{label:"Wave Height",formatted:o(p.waveHeight),color:re(p.waveHeight)}),e.jsx(u,{label:"Swell",formatted:o(p.swellHeight)}),e.jsx(u,{label:"Wind Speed",formatted:l(p.windSpeed)}),e.jsx(u,{label:"Wind Gusts",formatted:l(p.windGusts)}),e.jsx(u,{label:"Temperature",formatted:s(p.temperature)}),e.jsx(u,{label:"Pressure",formatted:n(p.pressure)})]}),d?e.jsx(B,{message:"Loading forecast data..."}):b?e.jsx(J,{error:b,onRetry:F}):r?e.jsxs(e.Fragment,{children:[x==="charts"?e.jsxs("div",{className:"space-y-6",children:[e.jsx(f,{title:"Wave Height Forecast",subtitle:"Significant wave height, swell, and wind waves",children:e.jsx(D,{hourlyData:r.hourly,thresholds:(E=a.thresholds)==null?void 0:E.helicopterOps})}),e.jsx(f,{title:"Wind Speed Forecast",subtitle:"Sustained wind speed and gusts",children:e.jsx(ee,{hourlyData:r.hourly})}),e.jsx(f,{title:"Temperature Forecast",subtitle:"Air temperature at 2m",children:e.jsx(te,{hourlyData:r.hourly})})]}):e.jsx(f,{title:"Hourly Forecast Data",subtitle:`${r.hourly.length} hours of forecast data`,children:e.jsx(se,{hourlyData:r.hourly,formatWave:o,formatWind:l,formatTemp:s,formatPressure:n,waveUnit:y(),windUnit:w(),tempUnit:c()})}),e.jsxs("p",{className:"text-xs text-gray-400 text-right",children:["Source: Open-Meteo | Last updated: ",A?q(A):"N/A"]})]}):e.jsx(f,{children:e.jsx("p",{className:"text-gray-500",children:"No forecast data available for this region."})})]})},u=({label:t,formatted:a,color:l="text-gray-900"})=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:t}),e.jsx("p",{className:`text-lg font-semibold ${l}`,children:a})]}),re=t=>t==null?"text-gray-900":t<1?"text-green-600":t<2?"text-yellow-600":t<3?"text-orange-600":"text-red-600";export{he as default};
